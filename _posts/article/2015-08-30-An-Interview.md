---
layout: post
title: An Interview
category: article
---

最近面试了一家外企的研发中心，跟一些做面向用户的业务的公司不太一样，这个研发中心主要是为业务做一些技术支持的，后来问了一下面试我的那个manager，他们部门当前做的事情有两个，1是big data相关的，2是在做一个类似于kafka的消息系统。

面试的是staff level，介于junior和senior之间，总共有四轮，前三轮是技术面试，第四轮是manager面试（面完manager要不是HR没空，HR也会来面一下），整个面试一上午解决，从早上8：30到11：30，效率还是挺高的。（写这些东西的时候还没面试结果。）

面试问题：

1. 多线程
	
	多线程肯定少不了的，
	
	* 会让你写程序（写单例模式），
	* 会考察具体的java.util.concurrent包中常用的类，
	* 相互之间有什么区别（给你具体的场景，让你选择用那个collection来实现，以及为什么这么选），
	* 具体是如何实现的（这个就会详细到代码层面，就有问我ConcurrentHashMap的实现原理，以及add操作和remove操作是如何实现的）
	
2. java内存模型

	* 内存分布有哪几块
	* volatile语义
	* 内存屏障 （由前面的单例模式问到了双重锁定检查实现的单例模式为什么在多线程环境下有问题）
	* 垃圾回收（回收算法，收集器，这部分主要考察一下是否知道）
	* jvm优化简单的问了
	
3. cache

	* 这个没有考察memcache或者redis的内存管理之类的，主要是有个面试官从简单到复杂，从单线程到多线程这样一个循序渐进的过程让我去实现一个cache，以此考察你的思路。顺便也考察了java.util.concurrent包里面的collection（又回到多线程了）。
	* cache失效如何实现 LRU实现啊，过期时间检查啊，弱引用啊（这个时面试官告诉我的）
	* 主键的选择
	
4. 数据库

	这部分问的不是特别多（大概也因为答的不怎么样）
	
	* mysql有哪些引擎，区别是什么
	* mysql加快查询操作有哪些办法
	* mysql实现事务的原理（回答不上来）
	* mysql单机无法满足系统需求之后你会怎么做
	* 简单的sql语句
	* mongodb有什么特点，为什么你们的系统选择mongodb
	* 你还知道哪些其他的nosql数据库
	
5. framework

	* 只有一个人问了spring的原理，整个生命周期，只能表示回答不上来……，然后也就没问了
	* zookeeper的初始化过程中，每个client节点会接到哪些状态通知……，答不上来
	* hadoop的有想问一下，但是表示不怎么了解之后也就没了。
	* 别的也就没怎么问了
	
6. 基础知识
	
	考察的不是很多，回答的也一般。

7. 算法

	给了两三道算法题，可惜都没回答上来，这部分平时接触的也少。
	
8. 英文

	似乎表现的还凑合，面试没有全程英文，基本上只是让你英文自我介绍，然后英文介绍项目经历，再问几个简单的问题，差不多就切回中文了。
	
9. 其他

	之前项目的事情问的不是很多，也没怎么问你在team中主要做什么，就画了一下一个项目的架构。




	
	
